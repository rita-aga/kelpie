\* TLC Configuration for KelpieFDBTransaction (Safe - correct conflict detection)
\*
\* This configuration models FDB transaction semantics with proper conflict
\* detection. All invariants should pass.
\*
\* Run with:
\*   java -XX:+UseParallelGC -jar tla2tools.jar -deadlock -config KelpieFDBTransaction.cfg KelpieFDBTransaction.tla

\* Constants
CONSTANTS
    Txn1 = Txn1
    Txn2 = Txn2
    Transactions = {Txn1, Txn2}
    k1 = k1
    k2 = k2
    Keys = {k1, k2}
    v0 = v0
    v1 = v1
    v2 = v2
    Values = {v0, v1, v2}
    InitialValue = v0
    NoValue = NoValue
    IDLE = IDLE
    RUNNING = RUNNING
    COMMITTED = COMMITTED
    ABORTED = ABORTED
    EnableConflictDetection = TRUE

\* Specification
SPECIFICATION Spec

\* Check all safety invariants
INVARIANT TypeOK
INVARIANT SerializableIsolation
INVARIANT ConflictDetection
INVARIANT AtomicCommit
INVARIANT ReadYourWrites

\* Check liveness properties
PROPERTY EventualTermination

\* State constraint to bound the model
CONSTRAINT StateConstraint
