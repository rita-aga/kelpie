\* Configuration file for KelpieActorLifecycle.tla
\* Buggy variant - GracefulDeactivation should FAIL
\* This demonstrates CompleteDeactivation_WithPending bug from issue #8

\* Bug Variants tested:
\*   - CompleteDeactivation_WithPending: BUGGY_DEACTIVATE=TRUE violates GracefulDeactivation
\*   - ProcessMessage_WhenDeactivating: BUGGY_INVOKE=TRUE violates LifecycleOrdering
\* This config tests the deactivation bug (GracefulDeactivation violation)

\* Constants
CONSTANT
    MAX_PENDING = 2
    IDLE_TIMEOUT = 2
    BUGGY_INVOKE = TRUE
    BUGGY_DEACTIVATE = TRUE

\* Specification
SPECIFICATION Spec

\* Safety Invariants
INVARIANT TypeOK

\* GracefulDeactivation WILL FAIL - this is expected!
\* The buggy mode allows deactivation with pending messages
INVARIANT GracefulDeactivation

\* LifecycleOrdering will also fail with BUGGY_INVOKE=TRUE
\* INVARIANT LifecycleOrdering
INVARIANT IdleTimeoutRespected

\* NoResurrection may also fail due to buggy deactivation
\* INVARIANT NoResurrection
