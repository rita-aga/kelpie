\* Buggy TLC Configuration for KelpieLinearizability
\*
\* This configuration should FAIL by violating linearizability invariants.
\* Currently uses the same spec but with BUGGY mode (to be added).
\*
\* Run with: java -XX:+UseParallelGC -jar tla2tools.jar -deadlock -config KelpieLinearizability_Buggy.cfg KelpieLinearizability.tla

\* =========================================================================
\* SPECIFICATION
\* =========================================================================

SPECIFICATION SafetySpec

\* =========================================================================
\* CONSTANTS
\* =========================================================================

\* Note: To create a true buggy config, add BUGGY constant to spec
\* and modify actions to skip linearization point checks when BUGGY=TRUE
CONSTANT
    Clients = {c1}
    Actors = {a1}
    Nodes = {n1, n2}
    NONE = NONE
    MAX_HISTORY = 5

\* =========================================================================
\* STATE CONSTRAINT
\* =========================================================================

CONSTRAINT StateConstraint

\* =========================================================================
\* INVARIANTS
\* =========================================================================

\* Check all invariants - these should fail in buggy mode
INVARIANT TypeOK
INVARIANT SequentialPerActor
INVARIANT ReadYourWrites
INVARIANT MonotonicReads
INVARIANT DispatchConsistency
INVARIANT OwnershipConsistency
