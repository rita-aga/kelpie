\* KelpieMigration Configuration - SAFE VERSION
\* This configuration should pass all invariants

\* Model values for constants
CONSTANTS
    \* Two nodes for migration
    Nodes = {n1, n2}
    n1 = n1
    n2 = n2

    \* One actor to migrate
    Actors = {a1}
    a1 = a1

    \* Maximum crashes to explore (bounded model checking)
    MaxCrashes = 2

    \* SAFE: Do NOT skip state transfer
    SkipTransfer = FALSE

    \* Migration phases (model values)
    Idle = Idle
    Preparing = Preparing
    Transferring = Transferring
    Completing = Completing
    Completed = Completed
    Failed = Failed

    \* Activation states (model values)
    Active = Active
    Inactive = Inactive
    Migrating = Migrating

\* Specification to check
SPECIFICATION Spec

\* Check these invariants (all should pass)
INVARIANTS
    TypeInvariant
    MigrationAtomicity
    NoStateLoss
    SingleActivationDuringMigration
    MigrationRollback

\* Liveness properties (check with FairSpec)
\* PROPERTIES
\*     EventualMigrationCompletion
\*     EventualRecovery
