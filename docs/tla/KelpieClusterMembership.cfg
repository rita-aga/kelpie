\* KelpieClusterMembership.cfg
\* Safe configuration - all invariants should pass

\* Model values for constants
CONSTANTS
    \* Set of nodes - use small set for bounded model checking
    Nodes = {n1, n2, n3}

    \* Maximum view number to bound state space (reduced for faster verification)
    MaxViewNum = 3

    \* SAFE MODE: Nodes require quorum to become primary
    BUGGY_MODE = FALSE

    \* Node state constants
    Joining = Joining
    Active = Active
    Leaving = Leaving
    Failed = Failed
    Left = Left

    \* Special value
    NoPrimary = NoPrimary

\* Check these invariants
\* Note: MembershipConsistency and LeaveDetectionWeak are liveness properties
\* The key safety property is NoSplitBrain (only one primary)
\* TypeOK and JoinAtomicity are structural invariants
INVARIANTS
    TypeOK
    JoinAtomicity
    NoSplitBrain

\* Specification
SPECIFICATION Spec
