\* KelpieRegistry_Buggy.cfg - TLC configuration for BUGGY version
\*
\* This configuration tests a buggy implementation that allows:
\* - Placing actors on non-Active nodes (should violate PlacementConsistency)
\*
\* Expected result: TLC should find a counterexample where PlacementConsistency
\* is violated (an actor is placed on a Failed node).
\*
\* NOTE: Requires BUGGY constant added to KelpieRegistry.tla with conditional
\* logic in ClaimActor to skip IsHealthy check when BUGGY=TRUE.
\*
\* Run with:
\*   java -XX:+UseParallelGC -jar ~/tla2tools.jar -deadlock -config KelpieRegistry_Buggy.cfg KelpieRegistry.tla

\* ---------------------------------------------------------------------------
\* Constants
\* ---------------------------------------------------------------------------

\* Small model for fast counterexample discovery
CONSTANT
    Nodes = {n1, n2}
    Actors = {a1}
    MaxHeartbeatMiss = 1
    Active = Active
    Suspect = Suspect
    Failed = Failed
    NONE = NONE
    BUGGY = TRUE

\* ---------------------------------------------------------------------------
\* Specification
\* ---------------------------------------------------------------------------

SPECIFICATION Spec

\* ---------------------------------------------------------------------------
\* Safety Invariants (expect PlacementConsistency to FAIL)
\* ---------------------------------------------------------------------------

INVARIANT TypeOK
INVARIANT SingleActivation
INVARIANT PlacementConsistency

\* ---------------------------------------------------------------------------
\* No liveness checks in buggy mode (focus on safety violation)
\* ---------------------------------------------------------------------------
