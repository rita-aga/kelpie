\* TLC Configuration for KelpieLinearizability
\*
\* Run with: java -XX:+UseParallelGC -jar tla2tools.jar -deadlock -config KelpieLinearizability.cfg KelpieLinearizability.tla

\* =========================================================================
\* SPECIFICATION
\* =========================================================================

\* Use safety-only spec (no liveness checking)
\* This verifies linearizability invariants efficiently
SPECIFICATION SafetySpec

\* =========================================================================
\* CONSTANTS
\* =========================================================================

\* Small model for tractable checking
\* 1 client, 1 actor, 2 nodes is sufficient to find linearizability violations
CONSTANT
    Clients = {c1}
    Actors = {a1}
    Nodes = {n1, n2}
    NONE = NONE
    MAX_HISTORY = 5

\* =========================================================================
\* STATE CONSTRAINT (for bounded model checking)
\* =========================================================================

\* Limit state space for tractable checking
\* Ensures finite state space for model checking
CONSTRAINT StateConstraint

\* =========================================================================
\* INVARIANTS (Safety Properties)
\* =========================================================================

\* Check all safety invariants
INVARIANT TypeOK
INVARIANT SequentialPerActor
INVARIANT ReadYourWrites
INVARIANT MonotonicReads
INVARIANT DispatchConsistency
INVARIANT OwnershipConsistency
