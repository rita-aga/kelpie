\* KelpieMigration Configuration - BUGGY VERSION
\* This configuration SHOULD FAIL MigrationAtomicity invariant
\*
\* The bug: SkipTransfer = TRUE causes the migration to complete
\* without actually transferring the actor state, violating atomicity.

\* Model values for constants
CONSTANTS
    \* Two nodes for migration
    Nodes = {n1, n2}
    n1 = n1
    n2 = n2

    \* One actor to migrate
    Actors = {a1}
    a1 = a1

    \* Maximum crashes to explore (bounded model checking)
    MaxCrashes = 2

    \* BUGGY: Skip state transfer - this introduces the bug!
    SkipTransfer = TRUE

    \* Migration phases (model values)
    Idle = Idle
    Preparing = Preparing
    Transferring = Transferring
    Completing = Completing
    Completed = Completed
    Failed = Failed

    \* Activation states (model values)
    Active = Active
    Inactive = Inactive
    Migrating = Migrating

\* Specification to check
SPECIFICATION Spec

\* Check these invariants
\* MigrationAtomicity SHOULD FAIL because state transfer is skipped
INVARIANTS
    TypeInvariant
    MigrationAtomicity
    NoStateLoss
    SingleActivationDuringMigration
    MigrationRollback
